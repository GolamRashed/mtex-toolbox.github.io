
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <title> (DocHelp Toolbox)
         
      </title>
      <!-- DOCNAME: DocHelp Toolbox -->
      <meta name="chunktype" content="refpage">
      <!-- CHUNKNAME: Twinning2 -->
      <!-- HEADSTUFF: Twinning2 -->
      <!-- HEADSTUFF -->
      <meta name="refentity" content="method:Twinning2">
      <meta http-equiv="Content-Script-Type" content="text/javascript">
      <meta name="toctype" content="fcn">
      <link rel="stylesheet" href="up.css"><script language="JavaScript" src="docscripts.js"></script></head>
   <body><a name="top_of_page"></a><div class="navbar navbar-inverse navbar-fixed-top">
         <div class="navbar-inner">
            <div class="container"><a class="brand" href="/">MTEX Toolbox</a><ul class="nav">
                  <li><a href="/download.html">Downloads</a></li>
               </ul>
               <ul class="nav">
                  <li><a href="/documentation.html">Documentation</a></li>
               </ul>
               <ul class="nav">
                  <li><a href="/team.html">People</a></li>
               </ul>
               <ul class="nav">
                  <li><a href="/publications.html">Publications</a></li>
               </ul>
               <ul class="nav">
                  <li><a href="/support.html">Support</a></li>
               </ul>
            </div>
         </div>
      </div>
      <div class="container">
         <h1></h1>
         <div class="subheading"></div><pre class="codeinput">mtexdata <span class="string">twins</span>

ebsd = ebsd(<span class="string">'indexed'</span>)</pre><pre class="codeoutput"> 
ebsd = EBSD  
 
 Phase  Orientations    Mineral       Color  Symmetry  Crystal reference frame
     1  22833 (100%)  Magnesium  light blue     6/mmm        X||a*, Y||b, Z||c
 
 Properties: bands, bc, bs, error, mad, x, y
 Scan unit : um
 
</pre><pre class="codeinput">plot(ebsd,ebsd.orientations)</pre><pre class="codeoutput"> 
  Hint: You might want to use the point group
  "622" for colorcoding!
 
  I'm going to colorize the orientation data with the 
  standard MTEX colorkey. To view the colorkey do:
 
  oM = ipdfHSVOrientationMapping(ori_variable_name)
  plot(oM)
</pre><img src="Twinning2_01.png"> <pre class="codeinput">[grains,ebsd.grainId] = calcGrains(ebsd(<span class="string">'indexed'</span>))

<span class="comment">% smooth the grain boundaries a bit</span>
grains = smooth(grains,2)</pre><pre class="codeoutput"> 
grains = grain2d  
 
 Phase  Grains    Mineral  Symmetry  Crystal reference frame  Phase
     1     121  Magnesium     6/mmm        X||a*, Y||b, Z||c       
 
 Properties: GOS, meanRotation
 
 
ebsd = EBSD  
 
 Phase  Orientations    Mineral       Color  Symmetry  Crystal reference frame
     1  22833 (100%)  Magnesium  light blue     6/mmm        X||a*, Y||b, Z||c
 
 Properties: bands, bc, bs, error, mad, x, y, grainId
 Scan unit : um
 
 
grains = grain2d  
 
 Phase  Grains    Mineral  Symmetry  Crystal reference frame  Phase
     1     121  Magnesium     6/mmm        X||a*, Y||b, Z||c       
 
 Properties: GOS, meanRotation
 
</pre><pre class="codeinput">gB = grains.boundary

hold <span class="string">on</span>
plot(gB,<span class="string">'linewidth'</span>,2)
hold <span class="string">off</span></pre><pre class="codeoutput"> 
gB = grainBoundary  
 
 Segments   mineral 1  mineral 2
      606  notIndexed  Magnesium
     3219   Magnesium  Magnesium
</pre><img src="Twinning2_02.png"> <h2>compute the misorientation between two grains<a name="5"> </a></h2><pre class="codeinput">mori = inv(grains(65).meanOrientation) * grains(74).meanOrientation;</pre><h2>select twinning boundaries<a name="6"> </a></h2><pre class="codeinput"><span class="comment">% define a twinning misorientation</span>
twinMori = orientation(<span class="string">'axis'</span>,Miller(1,-2,1,0,ebsd.CS,<span class="string">'uvw'</span>),<span class="keyword">...</span>
  <span class="string">'angle'</span>,86.3*degree,ebsd.CS,ebsd.CS)

<span class="comment">% consider only Magnesium to Magnesium grain boundaries</span>
gBMg2Mg = gB(<span class="string">'Magnesium'</span>,<span class="string">'Magnesium'</span>);

<span class="comment">% restrict to twinnings with threshold 5 degree</span>
isTwinning = angle(gBMg2Mg.misorientation,twinMori) &lt; 5*degree;
twinBoundary = gBMg2Mg(isTwinning)

<span class="comment">% plot the twinning boundaries</span>
hold <span class="string">on</span>
plot(twinBoundary,<span class="string">'linecolor'</span>,<span class="string">'b'</span>,<span class="string">'linewidth'</span>,2,<span class="string">'displayName'</span>,<span class="string">'twin boundary'</span>)
hold <span class="string">off</span></pre><pre class="codeoutput"> 
twinMori = misorientation  
  size: 1 x 1
  crystal symmetry : Magnesium (6/mmm, X||a*, Y||b, Z||c)
  crystal symmetry : Magnesium (6/mmm, X||a*, Y||b, Z||c)
 
  Bunge Euler angles in degree
  phi1  Phi phi2 Inv.
   270 86.3   90    0
 
 
 
twinBoundary = grainBoundary  
 
 Segments  mineral 1  mineral 2
     1757  Magnesium  Magnesium
</pre><img src="Twinning2_03.png"> <h2>merge twins along twin boundaries<a name="7"> </a></h2><pre class="codeinput">[mergedGrains,parentId] = merge(grains,twinBoundary);

<span class="comment">% plot the merged grains</span>
plot(ebsd,ebsd.orientations)
hold <span class="string">on</span>
plot(mergedGrains.boundary,<span class="string">'linecolor'</span>,<span class="string">'b'</span>,<span class="string">'linewidth'</span>,1.5,<span class="string">'linestyle'</span>,<span class="string">'-'</span>,<span class="keyword">...</span>
  <span class="string">'displayName'</span>,<span class="string">'merged grains'</span>)
hold <span class="string">off</span></pre><pre class="codeoutput"> 
  Hint: You might want to use the point group
  "622" for colorcoding!
 
  I'm going to colorize the orientation data with the 
  standard MTEX colorkey. To view the colorkey do:
 
  oM = ipdfHSVOrientationMapping(ori_variable_name)
  plot(oM)
</pre><img src="Twinning2_04.png"> <h2>remove boundary grains<a name="8"> </a></h2><pre class="codeinput"><span class="comment">% this gives the boundary ids that are</span>
boundaryIds = mergedGrains.boundary.hasPhaseId(0);

<span class="comment">% the corresponding grain ids</span>
grainId = unique(mergedGrains.boundary(boundaryIds).grainId(:,2))

<span class="comment">% remove those grains from the list</span>
mergedGrains(grainId) = []</pre><pre class="codeoutput">grainId =
     1
     2
     3
     5
     7
    10
    11
    12
    13
    14
    15
    16
    18
    23
    24
    25
    26
    27
    28
 
mergedGrains = grain2d  
 
 Phase  Grains    Mineral  Symmetry  Crystal reference frame  Phase
     1       9  Magnesium     6/mmm        X||a*, Y||b, Z||c       
 
        GOS   meanRotation
 0.00710511         121.72
          0        120.776
 0.00413797        127.137
 0.00441718        122.376
          0        47.1075
          0         161.03
          0        149.656
  0.0855637        128.221
          0        156.824
 
</pre><pre class="codeinput">plot(mergedGrains)</pre><img src="Twinning2_05.png"> <h2>grain relationships<a name="10"> </a></h2><pre class="codeinput"><span class="comment">% each merged grain has an id, i.e.,</span>
mergedGrains(5).id

<span class="comment">% and each of the original grains has a property |paraentId| which</span>
<span class="comment">% indicates into which grain it has been merged hence, you can find the</span>
<span class="comment">% childs of |mergedGrains(20)| by</span>
childs = grains(parentId == mergedGrains(5).id)

<span class="comment">% for each of the childs you can get Euler angles</span>
childs.meanOrientation

<span class="comment">% and the grain size</span>
childs.grainSize

<span class="comment">% or</span>
childs.area</pre><pre class="codeoutput">ans =
    17
 
childs = grain2d  
 
 Phase  Grains    Mineral  Symmetry  Crystal reference frame  Phase
     1       8  Magnesium     6/mmm        X||a*, Y||b, Z||c       
 
        GOS   meanRotation
 0.00500566        19.0448
          0        18.4261
          0        19.1617
 0.00709537        18.7687
  0.0128808        144.967
 0.00755447        18.6546
  0.0126356        145.154
 0.00963634        18.5054
 
 
ans = orientation  
  size: 8 x 1
  crystal symmetry : Magnesium (6/mmm, X||a*, Y||b, Z||c)
  specimen symmetry: 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  153.044 18.7346 203.517       0
  152.933   18.19 204.114       0
  155.027   18.91 201.863       0
   155.35 18.6108 202.209       0
  30.1181 75.0615 194.492       0
  154.098 18.4237 202.964       0
  29.5396 75.0334 194.818       0
  159.102 18.4221 199.136       0
 
 
ans =
     9
     1
     1
    92
   560
   422
   345
    30
ans =
    0.7667
    0.0351
    0.0141
    8.1873
   50.7730
   38.2040
   31.0486
    2.8240
</pre><p style="font-size:1px;"></p>
         <table class="footer" border="0" width="100%" cellpadding="0" cellspacing="0">
            <tr>
               <td valign="baseline" align="right">DocHelp 0.1 beta</td>
            </tr>
         </table>
      </div>
   </body>
</html>